<div class="col-lg-12">
  <h1><a class="btn btn-default" [routerLink]="['/proyecciones']"><i class="fa fa-chevron-left"></i> </a>
    Proyección de avance de obra - {{ centro_costo?.obra }}</h1>
  <table class="table table-hover">
    <thead>
      <tr>
        <th>Periodo</th>
        <th>Avance</th>
        <th>Observación</th>
        <th>Acumulado</th>
        <th>Real</th>
        <th>Acumulado Consolidado</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let avance of avances;" [@fadeInAnimation] [ngClass]="itemIsValid(avance) ? '' : 'danger'">
        <td>
          <select class="form-control input-sm" name="periodo" [(ngModel)]="avance.periodo_id" required [disabled]="isDisabled">
            <option *ngFor="let periodo of periodos" [value]='periodo.pk'>
              {{ periodo.descripcion }}
            </option>
          </select>
        </td>
        <td>
          <div class="input-group input-group-sm">
            <input myCurrencyFormatter [readonly]="isDisabled"
                type="tel" class="form-control input-sm number" name="avance"
                [(ngModel)]="avance.avance" #avanceVal/>
            <span class="input-group-addon">{{ avanceVal.value | porciento }}</span>
          </div>
        </td>
        <td>
            <input type="text" class="form-control input-sm" name="observacion" [(ngModel)]="avance.observacion"/>
        </td>
        <td class="info number">
          {{ acumulado(avance) | porciento }}
        </td>
        <td class="success number">
          <span *ngIf="find_real(avance); let real">{{ real?.avance | porciento }}</span>
        </td>
        <td class="danger number">
          {{ acumuladoConsolidado(avance) | porciento }}
        </td>
        <td>
          <button class="btn btn-danger btn-sm"
            (click)="eliminarAvanceObra(avance)"><i class="fa fa-trash"></i> Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>
  <button class="btn btn-info" (click)="aniadirAvanceObra()"><i class="fa fa-plus"></i> Añadir item a proyección</button>
  <button class="btn btn-success" (click)="guardarTodos()" [disabled]="isDisabled">
    <i class="fa fa-save"></i>
    <span *ngIf="!isDisabled">Guardar proyección</span>
    <span *ngIf="isDisabled">Guardando...</span>
  </button>
</div>

